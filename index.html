<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATLAS MMORPG</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="login-register">
                <ul>
                    <li><a class="login" href="login.php">LOG IN</a></li>
                    <li><a class="signup" href="signup.php">SIGN UP</a></li>
                </ul>
            </div>

            <div class="box-container">
                <div class="navigation-bar">
                    <ul>
                        <li><a href="index.html">HOME</a></li>
                        <li><a href="about.html">ABOUT</a></li>
                        <li><a href="addtocart.html">STORE</a></li>
                    </ul>
                </div>

                <div class="logo">
                    <img src="images/ATLAS-LOGO.png" alt="ATLAS Logo">
                </div>

                <div class="bbx-container">
                    <div class="welcome-msg">
                        <h1>WELCOME TO ATLAS!</h1>
                    </div>
    
                    <form action="" class="search-bar">
                        <input type="text" placeholder="FIND ITEM">

                        <button class="btn-search">
                            <img src="images/search-icon.png" alt="Search Icon">
                        </button>
                    </form>
                </div>
    
                <div class="players-online">
                    <img src="images/multiple-users.png" alt="Multiple Users">

                    <div class="play">
                        <p class="play-text">PLAY.ATLASMMORPG.COM</p>
                        <p class="online">
                            <span class="player-count">1000</span> Players Online
                            <span class="dot"></span>
                        </p>
                    </div>
                </div>
            </div>
        </header>

        <div class="main-content">
            
        </div>
        <div class="update-form">
            <div class="news-feed" id="newsFeed">
                <!-- News items will be added here dynamically -->
            </div>
            

        </div>

    </div>
    <button onclick="fetchNews()">Load More News</button>

    <script>
        let currentIndex = 0; // Tracks how many items are loaded
        let newsData = []; // Placeholder for the news data

        // Function to fetch news data from the PHP script
        async function fetchNews() {
            try {
                // Load the news data only once
                if (newsData.length === 0) {
                    const response = await fetch('fetch_news.php');
                    newsData = await response.json();
                }

                const newsFeed = document.getElementById('newsFeed');
                const itemsToLoad = 2; // Number of items to load per click

                // Add new items to the feed
                for (let i = 0; i < itemsToLoad && currentIndex < newsData.length; i++) {
                    const item = newsData[currentIndex++];
                    const div = document.createElement('div');
                    div.className = 'news-item';

                    div.innerHTML = `
                        <div class="news-header">${item.title}</div>
                        <div class="news-date">Date: ${item.date}</div>
                        <div class="news-author">Author: ${item.author}</div>
                        <img src="${item.image}" alt="News Image" class="news-image">
                        <div class="news-content">${item.content}</div>
                        <a href="${item.link}" target="_blank">Learn More</a>
                    `;

                    newsFeed.appendChild(div);
                }

                // Disable the button if all items are loaded
                if (currentIndex >= newsData.length) {
                    const button = document.querySelector('button');
                    button.disabled = true;
                    button.textContent = 'No More News';
                }
            } catch (error) {
                console.error('Error fetching news:', error);
            }
        }

        // Load the first set of news items when the page loads
        fetchNews();
    </script>
</body>
</html>